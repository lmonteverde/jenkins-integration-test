post {
    always {
        // Archiva los resultados del reporter HTML Extra
        archiveArtifacts artifacts: 'newman/**/*', allowEmptyArchive: true
    }

    success {
        // Publica los informes HTML en Jenkins
        publishHTML([
            allowMissing: false,
            alwaysLinkToLastBuild: false,
            keepAll: true,
            reportDir: 'newman',
            reportFiles: 'API_Testing-*.html',
            reportName: 'Postman Collection Report'
        ])

        echo 'Postman collection run successful!'
    }

    failure {
        echo 'Postman collection run failed!'
    }

    // Nuevo paso al final del pipeline
    // Establece la propiedad como variable de entorno
    withEnv(['SYSTEM_PROPS=${env.SYSTEM_PROPS}']) {
        // Tu script específico
        sh 'echo "Tu script específico"'
    }
}
